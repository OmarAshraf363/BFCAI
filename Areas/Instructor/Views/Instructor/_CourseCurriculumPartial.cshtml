@model Banha_UniverCity.Models.Course

<style>
    .video-container, .reference-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px; /* Increased gap for better spacing */
    }

    .video-item, .reference-item {
        /* flex: 1 1 calc(33% - 20px); */ /* Adjust percentage for responsive design */
        box-sizing: border-box;
        background: #f5f5f5; /* Light background color */
        border-radius: 10px;
        padding: 15px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        display: flex;
        align-items: center;
        gap: 10px;
        transition: background-color 0.3s ease, box-shadow 0.3s ease; /* Smooth transitions */
    }

        .video-item:hover, .reference-item:hover {
            background-color: #e0e0e0; /* Slightly darker background on hover */
            box-shadow: 0 6px 14px rgba(0,0,0,0.2); /* Enhanced shadow on hover */
        }

        .video-item a, .reference-item a {
            text-decoration: none;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s ease;
        }

            .video-item a:hover, .reference-item a:hover {
                color: #007bff; /* Color change on hover */
            }

    .btn-outline-primary {
        border-color: #007bff;
        color: #007bff;
        background-color: transparent;
    }

        .btn-outline-primary:hover {
            background-color: #007bff;
            color: #fff;
        }

    .btn-outline-secondary {
        border-color: #6c757d;
        color: #6c757d;
        background-color: transparent;
    }

        .btn-outline-secondary:hover {
            background-color: #6c757d;
            color: #fff;
        }

    .modal-content {
        background-color: #ffffff;
        color: #333333;
    }

    .modal-header, .modal-footer {
        border-bottom: 1px solid #e0e0e0;
    }

    .modal-title {
        color: #007bff;
    }
</style>

@if (Model.CourseCurricula != null && Model.CourseCurricula.Any())
{
    <ul class="list-group">
        @foreach (var curriculum in Model.CourseCurricula)
        {
            <li class="list-group-item mb-4">
                <h5 class="font-weight-bold">@curriculum.Title</h5>
                <p>@curriculum.Content</p>

                <!-- عرض الفيديوهات الخاصة بالمنهج -->
                <div class="mb-4">
                    @if (curriculum.CourseVideos != null && curriculum.CourseVideos.Any())
                    {
                        <h6 class="text-primary">Videos:</h6>
                        <div class="video-container">
                            @foreach (var video in curriculum.CourseVideos)
                            {
                                <div class="video-item">
                                    <a href="@video.VideoURL" target="_blank">
                                        <i class="fa-solid fa-video"></i> @video.VideoTitle
                                    </a>
                                    <!-- زر لتعديل الفيديو -->
                                    <a onclick="openAddToCourseRefOrVideo(@video.CourseCurriculumID,@video.CourseVideoID,'AddVideoModal')" class="btn btn-warning btn-sm ml-auto">
                                        <i class="fa-solid fa-edit"></i>
                                    </a>
                                    <a asp-action="DeleteVideo" asp-route-id="@video.CourseVideoID" asp-route-curriculumId="@video.CourseCurriculumID" asp-route-courseId="@video.CourseID" class="btn btn-danger btn-sm ml-2">
                                        <i class="fa-solid fa-trash"></i>
                                    </a>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <p class="text-muted">No videos available for this curriculum.</p>
                    }
                </div>

                <!-- عرض المراجع الخاصة بالمنهج -->
                <div class="mb-4">
                    @if (curriculum.CourseResources != null && curriculum.CourseResources.Any())
                    {
                        <h6 class="text-success">References:</h6>
                        <div class="reference-container">
                            @foreach (var reference in curriculum.CourseResources)
                            {
                                <div class="reference-item">
                                    <a href="@reference.ResourceURL" class="btn btn-primary btn-sm text-light" target="_blank">
                                        <i class="fa-solid fa-book"></i> @reference.ResourceTitle
                                    </a>
                                    <a asp-action="DeleteReference" asp-route-id="@reference.CourseResourceID" asp-route-curriculumId="@reference.CourseCurriculumID" class="btn btn-danger btn-sm ml-2">
                                        <i class="fa-solid fa-trash"></i>
                                    </a>
                                    <!-- زر لتعديل المرجع -->
                                    <a onclick="openAddToCourseRefOrVideo(@curriculum.CourseCurriculumID, @reference.CourseResourceID,'AddReferenceModal')" class="btn btn-warning btn-sm ml-2">
                                        <i class="fa-solid fa-edit"></i>
                                    </a>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <p class="text-muted">No references available for this curriculum.</p>
                    }
                </div>

                <!-- زر لإضافة فيديو -->
                <a class="btn btn-outline-primary mt-2" onclick="openAddToCourseRefOrVideo(@curriculum.CourseCurriculumID, null,'AddVideoModal')">
                    <i class="fa-solid fa-plus"></i> Add Video
                </a>

                <!-- زر لإضافة مرجع -->
                <a class="btn btn-outline-secondary mt-2" onclick="openAddToCourseRefOrVideo(@curriculum.CourseCurriculumID, null,'AddReferenceModal')">
                    <i class="fa-solid fa-plus"></i> Add Reference
                </a>
            </li>
        }
    </ul>
}
else
{
    <p class="text-muted">No curricula available for this course.</p>
}

<!-- Modals لاضافة فيديو ومرجع -->
<div class="modal fade" id="AddVideoModal" tabindex="-1" role="dialog" aria-labelledby="AddVideoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content bg-dark text-light">
            <!-- محتوى الـ Modal سيتم تحميله هنا بواسطة Ajax -->
        </div>
    </div>
</div>

<div class="modal fade" id="AddReferenceModal" tabindex="-1" role="dialog" aria-labelledby="AddReferenceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content bg-dark text-light">
            <!-- محتوى الـ Modal سيتم تحميله هنا بواسطة Ajax -->
        </div>
    </div>
</div>